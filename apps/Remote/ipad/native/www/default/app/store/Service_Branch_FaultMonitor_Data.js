
/* JavaScript content from app/store/Service_Branch_FaultMonitor_Data.js in folder common */
/*
 * File: app/store/Service_Branch_FaultMonitor_Data.js
 *
 * This file was generated by Sencha Architect
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.4.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.4.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('HelcRemote.store.Service_Branch_FaultMonitor_Data', {
    extend: 'Ext.data.Store',

    requires: [
        'Ext.data.proxy.JsonP',
        'Ext.data.reader.Json',
        'Ext.data.Field'
    ],

    config: {
        storeId: 'Service_Branch_FaultMonitor_Data',
        proxy: {
            type: 'jsonp',
            callbackKey: 'jsonpCallback',
            reader: {
                type: 'json',
                idProperty: 'acceptId',
                rootProperty: 'data'
            }
        },
        listeners: [
            {
                fn: 'onJsonpstoreBeforeLoad',
                event: 'beforeload'
            }
        ],
        fields: [
            {
                name: 'acceptId'
            },
            {
                name: 'acceptNo'
            },
            {
                name: 'branch'
            },
            {
                name: 'faults'
            },
            {
                name: 'trustedTime'
            },
            {
                name: 'distributeTime'
            },
            {
                name: 'address'
            },
            {
                name: 'areaId'
            },
            {
                name: 'bigCustomer'
            },
            {
                name: 'elevatorType'
            },
            {
                name: 'isMonitor'
            },
            {
                name: 'company_code'
            },
            {
                name: 'isAnyFaults'
            },
            {
                name: 'station'
            },
            {
                name: 'employeeNum'
            },
            {
                name: 'age'
            },
            {
                name: 'comeFrom'
            },
            {
                name: 'faultContent'
            },
            {
                name: 'comePerson'
            },
            {
                name: 'domainName'
            },
            {
                name: 'status'
            }
        ]
    },

    onJsonpstoreBeforeLoad: function(store, operation, eOpts) {
        var url;

        switch(this.parm) {
            case 'all':
            case 'huadong':
            case 'huanan':
            case 'huaxi':
            case 'huabei':
                url = 'http://' + remote.getCmsIP() + '/YL_SCDG/hitachi/accept/getFaultAcceptData.do' + '?areaCode=' + this.parm;
                break;
            default:
                url = 'http://' + remote.getCmsIP() + '/YL_SCDG/hitachi/accept/getFaultAcceptDataByCompany.do' + '?companyCode=' + this.parm;
                break;

        }
        store.getProxy().setUrl(url);
        console.log(url);
    },

    loadDat: function(onSuccess, onFailure, parm) {
        // 售后->区域地图->区域地图->故障授信监控
        var me = this;

        if(global.isWorklight()) {
            me.parm = parm;
            me.load();
        } else {
            this.setData([
                {
                "acceptId":"1-138VYTE",
                "acceptNo":"1-2373109247",
                "branch":"广州分公司",
                "faults":" B3栋07#客梯，困人",
                "trustedTime":"2016-07-01 16:08:00",
                "distributeTime":"2016-07-01 16:08:09",
                "address":"番禺万达广场",
                "areaId":4,
                "bigCustomer":"1",
                "elevatorType":"0",
                "isMonitor":"N",
                "company_code":"1-7YYL",
                "isAnyFaults":1,
                "station":"大石站",
                "employeeNum":"12G017168",
                "age":3,
                "comeFrom":"热线受理",
                "faultContent":" B3栋07#客梯，困人",
                "comePerson":"何耀",
                "domainName":"番禺万达广场",
                "status":"处理中"
                },
                {
                "acceptId":"1-138XF5E",
                "acceptNo":"1-2373177071",
                "branch":"广州分公司",
                "faults":"9座工人梯不运行",
                "trustedTime":"2016-07-01 15:44:04",
                "distributeTime":"2016-07-01 15:44:17",
                "address":"南天明苑",
                "areaId":4,
                "bigCustomer":"0",
                "elevatorType":"0",
                "isMonitor":"N",
                "company_code":"1-7YYL",
                "isAnyFaults":0,
                "station":"大石站",
                "employeeNum":"直梯无合同",
                "age":1,
                "comeFrom":"热线受理",
                "faultContent":"9座工人梯不运行",
                "comePerson":"周国良",
                "domainName":"南天明苑",
                "status":"处理中"
                },
                {
                "acceptId":"1-138IWE8",
                "acceptNo":"1-2372499581",
                "branch":"广州分公司",
                "faults":"C2栋2#电梯困人",
                "trustedTime":"2016-07-01 15:18:31",
                "distributeTime":"2016-07-01 15:18:40",
                "comeTime":"2016-07-01 15:40:00",
                "address":"东堤湾",
                "areaId":4,
                "rescueTime":"2016-07-01 16:03:00",
                "bigCustomer":"1",
                "elevatorType":"0",
                "isMonitor":"N",
                "company_code":"1-7YYL",
                "isAnyFaults":1,
                "station":"东山站",
                "employeeNum":"04日0286",
                "customer":"广州天力物业发展有限公司",
                "age":12,
                "comeFrom":"热线受理",
                "faultContent":"C2栋2#电梯困人",
                "comePerson":"陈升",
                "domainName":"东堤湾",
                "status":"活动处理中"
                },
                {
                "acceptId":"1-138LRP7",
                "acceptNo":"1-2372633464",
                "branch":"广州分公司",
                "faults":"3期北塔2#，启动下沉十公分",
                "trustedTime":"2016-07-01 14:48:11",
                "distributeTime":"2016-07-01 14:48:25",
                "address":"中山市盛迪嘉房地产开发有限公司",
                "areaId":4,
                "bigCustomer":"0",
                "elevatorType":"0",
                "isMonitor":"N",
                "company_code":"1-7YYL",
                "isAnyFaults":0,
                "station":"中山站",
                "employeeNum":"12G514499",
                "age":3,
                "comeFrom":"热线受理",
                "faultContent":"3期北塔2#，启动下沉十公分",
                "comePerson":"中山热线",
                "domainName":"中山市盛迪嘉房地产开发有限公司",
                "status":"处理中"
                },
                {
                "acceptId":"1-138V9MU",
                "acceptNo":"1-2373076611",
                "branch":"佛山分公司",
                "faults":"11号客梯不开门",
                "trustedTime":"2016-07-01 14:38:08",
                "distributeTime":"2016-07-01 14:38:20",
                "address":"恒福国际",
                "areaId":4,
                "bigCustomer":"0",
                "elevatorType":"0",
                "isMonitor":"N",
                "company_code":"1-7SNT",
                "isAnyFaults":0,
                "station":"佛山站",
                "employeeNum":"12G003045",
                "age":4,
                "comeFrom":"热线受理",
                "faultContent":"11号客梯不开门",
                "domainName":"恒福国际",
                "status":"处理中"
                },
            ]);

            onSuccess();
        }
    },

    filteDat: function(parm) {
        this.clearFilter();

        switch(parm) {
            case 'trap':
                this.filterBy(function(item) {
                    var trap = item.get('isAnyFaults');
                    return (trap===1);
                });
                break;

            case 'monitor':
                this.filterBy(function(item) {
                    var mon = item.get('isMonitor');
                    return (mon==='Y');
                });
                break;
        }
    }

});